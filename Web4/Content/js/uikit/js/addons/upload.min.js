/*! UIkit 2.10.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(n){var t;jQuery&&jQuery.UIkit&&(t=n(jQuery,jQuery.UIkit));typeof define=="function"&&define.amd&&define("uikit-upload",["uikit"],function(){return t||n(jQuery,jQuery.UIkit)})})(function(n,t){function i(u,f){function c(t,i){var u=new FormData,r=new XMLHttpRequest,f,o,e;if(i.before(i,t)!==!1){for(f=0;o=t[f];f++)u.append(i.param,o);for(e in i.params)u.append(e,i.params[e]);r.upload.addEventListener("progress",function(n){var t=n.loaded/n.total*100;i.progress(t,n)},!1);r.addEventListener("loadstart",function(n){i.loadstart(n)},!1);r.addEventListener("load",function(n){i.load(n)},!1);r.addEventListener("loadend",function(n){i.loadend(n)},!1);r.addEventListener("error",function(n){i.error(n)},!1);r.addEventListener("abort",function(n){i.abort(n)},!1);r.open(i.method,i.action,!0);r.onreadystatechange=function(){if(i.readystatechange(r),r.readyState==4){var t=r.responseText;if(i.type=="json")try{t=n.parseJSON(t)}catch(u){t=!1}i.complete(t,r)}};i.beforeSend(r);r.send(u)}}var o,s,h;if(!t.support.ajaxupload)return this;if(f=n.extend({},i.defaults,f),u.length){if(f.allow!=="*.*")for(o=0;s=u[o];o++)if(!r(f.allow,s.name)){typeof f.notallowed=="string"?alert(f.notallowed):f.notallowed(s,f);return}if(h=f.complete,f.single){var a=u.length,e=0,l=!0;f.beforeAll(u);f.complete=function(n,t){e=e+1;h(n,t);f.filelimit&&e>=f.filelimit&&(l=!1);l&&e<a?c([u[e]],f):f.allcomplete(n,t)};c([u[0]],f)}else f.complete=function(n,t){h(n,t);f.allcomplete(n,t)},c(u,f)}}function r(n,t){var i="^"+n.replace(/\//g,"\\/").replace(/\*\*/g,"(\\/[^\\/]+)*").replace(/\*/g,"[^\\/]+").replace(/((?!\\))\?/g,"$1.")+"$";return i="^"+i+"$",t.match(new RegExp(i,"i"))!==null}return t.component("uploadSelect",{init:function(){var n=this;this.on("change",function(){i(n.element[0].files,n.options);var t=n.element.clone(!0).data("uploadSelect",n);n.element.replaceWith(t);n.element=t})}}),t.component("uploadDrop",{defaults:{dragoverClass:"uk-dragover"},init:function(){var n=this,t=!1;this.on("drop",function(t){t.dataTransfer&&t.dataTransfer.files&&(t.stopPropagation(),t.preventDefault(),n.element.removeClass(n.options.dragoverClass),n.element.trigger("uk.dropped",[t.dataTransfer.files]),i(t.dataTransfer.files,n.options))}).on("dragenter",function(n){n.stopPropagation();n.preventDefault()}).on("dragover",function(i){i.stopPropagation();i.preventDefault();t||(n.element.addClass(n.options.dragoverClass),t=!0)}).on("dragleave",function(i){i.stopPropagation();i.preventDefault();n.element.removeClass(n.options.dragoverClass);t=!1})}}),t.support.ajaxupload=function(){function n(){var n=document.createElement("INPUT");return n.type="file","files"in n}function t(){var n=new XMLHttpRequest;return!!(n&&"upload"in n&&"onprogress"in n.upload)}function i(){return!!window.FormData}return n()&&t()&&i()}(),t.support.ajaxupload&&n.event.props.push("dataTransfer"),i.defaults={action:"",single:!0,method:"POST",param:"files[]",params:{},allow:"*.*",type:"text",filelimit:!1,before:function(){},beforeSend:function(){},beforeAll:function(){},loadstart:function(){},load:function(){},loadend:function(){},error:function(){},abort:function(){},progress:function(){},complete:function(){},allcomplete:function(){},readystatechange:function(){},notallowed:function(n,t){alert("Only the following file types are allowed: "+t.allow)}},t.Utils.xhrupload=i,i});
//# sourceMappingURL=upload.min.js.map
