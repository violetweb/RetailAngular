/*! UIkit 2.10.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(n){var t;jQuery&&jQuery.UIkit&&(t=n(jQuery,jQuery.UIkit));typeof define=="function"&&define.amd&&define("uikit-autocomplete",["uikit"],function(){return t||n(jQuery,jQuery.UIkit)})})(function(n,t){t.component("autocomplete",{defaults:{minLength:3,param:"search",method:"post",delay:300,loadingClass:"uk-loading",flipDropdown:!1,skipClass:"uk-skip",hoverClass:"uk-active",source:null,renderer:null,template:'<ul class="uk-nav uk-nav-autocomplete uk-autocomplete-results">{{~items}}<li data-value="{{$item.value}}"><a>{{$item.value}}<\/a><\/li>{{/items}}<\/ul>'},visible:!1,value:null,selected:null,init:function(){var i=this,r=!1,u=t.Utils.debounce(function(){if(r)return r=!1;i.handle()},this.options.delay);this.dropdown=this.find(".uk-dropdown");this.template=this.find('script[type="text/autocomplete"]').html();this.template=t.Utils.template(this.template||this.options.template);this.input=this.find("input:first").attr("autocomplete","off");this.dropdown.length||(this.dropdown=n('<div class="uk-dropdown"><\/div>').appendTo(this.element));this.options.flipDropdown&&this.dropdown.addClass("uk-dropdown-flip");this.input.on({keydown:function(n){if(n&&n.which&&!n.shiftKey)switch(n.which){case 13:r=!0;i.selected&&(n.preventDefault(),i.select());break;case 38:n.preventDefault();i.pick("prev",!0);break;case 40:n.preventDefault();i.pick("next",!0);break;case 27:case 9:i.hide()}},keyup:u,blur:function(){setTimeout(function(){i.hide()},200)}});this.dropdown.on("click",".uk-autocomplete-results > *",function(){i.select()});this.dropdown.on("mouseover",".uk-autocomplete-results > *",function(){i.pick(n(this))});this.triggercomplete=u},handle:function(){var n=this,t=this.value;return(this.value=this.input.val(),this.value.length<this.options.minLength)?this.hide():(this.value!=t&&n.request(),this)},pick:function(n,t){var f=this,i=this.dropdown.find(".uk-autocomplete-results").children(":not(."+this.options.skipClass+")"),r=!1,u;if(typeof n=="string"||n.hasClass(this.options.skipClass)?(n=="next"||n=="prev")&&(this.selected?(u=i.index(this.selected),r=n=="next"?i.eq(u+1<i.length?u+1:0):i.eq(u-1<0?i.length-1:u-1)):r=i[n=="next"?"first":"last"]()):r=n,r&&r.length&&(this.selected=r,i.removeClass(this.options.hoverClass),this.selected.addClass(this.options.hoverClass),t)){var e=r.position().top,o=f.dropdown.scrollTop(),s=f.dropdown.height();(e>s||e<0)&&f.dropdown.scrollTop(o+e)}},select:function(){if(this.selected){var n=this.selected.data();this.trigger("autocomplete-select",[n,this]);n.value&&this.input.val(n.value);this.hide()}},show:function(){if(!this.visible)return this.visible=!0,this.element.addClass("uk-open"),this},hide:function(){if(this.visible)return this.visible=!1,this.element.removeClass("uk-open"),this},request:function(){var t=this,i=function(n){n&&t.render(n);t.element.removeClass(t.options.loadingClass)},r,u,f;if(this.element.addClass(this.options.loadingClass),this.options.source){r=this.options.source;switch(typeof this.options.source){case"function":this.options.source.apply(this,[i]);break;case"object":r.length&&(u=[],r.forEach(function(n){n.value&&n.value.toLowerCase().indexOf(t.value.toLowerCase())!=-1&&u.push(n)}),i(u));break;case"string":f={};f[this.options.param]=this.value;n.ajax({url:this.options.source,data:f,type:this.options.method,dataType:"json"}).done(function(n){i(n||[])});break;default:i(null)}}else this.element.removeClass(t.options.loadingClass)},render:function(n){var t=this;return this.dropdown.empty(),this.selected=!1,this.options.renderer?this.options.renderer.apply(this,[n]):n&&n.length&&(this.dropdown.append(this.template({items:n})),this.show(),this.trigger("autocomplete-show")),this}});t.$doc.on("focus.autocomplete.uikit","[data-uk-autocomplete]",function(){var i=n(this),r;i.data("autocomplete")||(r=t.autocomplete(i,t.Utils.options(i.attr("data-uk-autocomplete"))))});return t.autocomplete});
//# sourceMappingURL=autocomplete.min.js.map
