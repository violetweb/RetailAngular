/**
 * oclazyload - Load modules on demand (lazy load) with angularJS
 * @version v1.0.0-alpha2
 * @link https://github.com/ocombe/ocLazyLoad
 * @license MIT
 * @author Olivier Combe <olivier.combe@gmail.com>
 */
(function(n,t){"use strict";var u=["ng","oc.lazyLoad"],r={},l=[],i=[],e=[],o=n.noop,s={},c=[],v=n.module("oc.lazyLoad",["ng"]),a,h,f;v.provider("$ocLazyLoad",["$controllerProvider","$provide","$compileProvider","$filterProvider","$injector","$animateProvider",function(a,v,y,p,w,b){function rt(t,i,r){var l,e,h,a,v,y;if(i){for(a=[],l=i.length-1;l>=0;l--)if(e=i[l],n.isString(e)||(e=ot(e)),e&&c.indexOf(e)===-1){if(v=u.indexOf(e)===-1,h=f(e),v&&(u.push(e),rt(t,h.requires,r)),h._runBlocks.length>0)for(s[e]=[];h._runBlocks.length>0;)s[e].push(h._runBlocks.shift());n.isDefined(s[e])&&(v||r.rerun)&&(a=a.concat(s[e]));g(t,h._invokeQueue,e,r.reconfig);g(t,h._configBlocks,e,r.reconfig);o(v?"ocLazyLoad.moduleLoaded":"ocLazyLoad.moduleReloaded",e);i.pop();c.push(e)}y=t.getInstanceInjector();n.forEach(a,function(n){y.invoke(n)})}}function et(t,i){function e(t){return n.isArray(t)?nt(t.toString()):n.isObject(t)?nt(it(t)):n.isDefined(t)&&t!==null?nt(t.toString()):t}var f=t[2][0],u=t[1],h=!1,s;if(n.isUndefined(r[i])&&(r[i]={}),n.isUndefined(r[i][u])&&(r[i][u]={}),s=function(n,t){h=!0;r[i][u][n].push(t);o("ocLazyLoad.componentLoaded",[i,u,n])},n.isString(f))n.isUndefined(r[i][u][f])&&(r[i][u][f]=[]),r[i][u][f].indexOf(e(t[2][1]))===-1&&s(f,e(t[2][1]));else if(n.isObject(f))n.forEach(f,function(t){n.isString(t)&&(n.isUndefined(r[i][u][t])&&(r[i][u][t]=[]),r[i][u][t].indexOf(e(f[1]))===-1&&s(t,e(f[1])))});else return!1;return h}function g(t,i,r,u){var s,c,f,e,a,h,o,v;if(i)for(s=0,c=i.length;s<c;s++)if(f=i[s],n.isArray(f)){if(t!==null)if(t.hasOwnProperty(f[0]))e=t[f[0]];else throw new Error("unsupported provider "+f[0]);if(a=et(f,r),f[1]!=="invoke")a&&n.isDefined(e)&&e[f[1]].apply(e,f[2]);else if(h=function(t){var i=l.indexOf(r+"-"+t);(i===-1||u)&&(i===-1&&l.push(r+"-"+t),n.isDefined(e)&&e[f[1]].apply(e,f[2]))},n.isFunction(f[2][0]))h(f[2][0]);else if(n.isArray(f[2][0]))for(o=0,v=f[2][0].length;o<v;o++)n.isFunction(f[2][0][o])&&h(f[2][0][o])}}function ot(t){var i=null;return n.isString(t)?i=t:n.isObject(t)&&t.hasOwnProperty("name")&&n.isString(t.name)&&(i=t.name),i}function st(t){if(!n.isString(t))return!1;try{return f(t)}catch(i){if(/No module/.test(i)||i.message.indexOf("$injector:nomod")>-1)return!1}}var k={},ut={$controllerProvider:a,$compileProvider:y,$filterProvider:p,$provide:v,$injector:w,$animateProvider:b},tt=!1,ft=!1,d=[],it,nt;d.push=function(n){this.indexOf(n)===-1&&Array.prototype.push.apply(this,arguments)};this.config=function(t){n.isDefined(t.modules)&&(n.isArray(t.modules)?n.forEach(t.modules,function(n){k[n.name]=n}):k[t.modules.name]=t.modules);n.isDefined(t.debug)&&(tt=t.debug);n.isDefined(t.events)&&(ft=t.events)};this._init=function(r){var s;if(i.length===0){var h=[r],o=["ng:app","ng-app","x-ng-app","data-ng-app"],c=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/,f=function(n){return n&&h.push(n)};n.forEach(o,function(t){o[t]=!0;f(document.getElementById(t));t=t.replace(":","\\:");r[0].querySelectorAll&&(n.forEach(r[0].querySelectorAll("."+t),f),n.forEach(r[0].querySelectorAll("."+t+"\\:"),f),n.forEach(r[0].querySelectorAll("["+t+"]"),f))});n.forEach(h,function(t){if(i.length===0){var f=" "+r.className+" ",u=c.exec(f);u?i.push((u[2]||"").replace(/\s+/g,",")):n.forEach(t.attributes,function(n){i.length===0&&o[n.name]&&i.push(n.value)})}})}i.length!==0||(t.jasmine||t.mocha)&&n.isDefined(n.mock)||console.error("No module found during bootstrap, unable to init ocLazyLoad. You should always use the ng-app directive or angular.boostrap when you use ocLazyLoad.");s=function s(t){if(u.indexOf(t)===-1){u.push(t);var i=n.module(t);g(null,i._invokeQueue,t);g(null,i._configBlocks,t);n.forEach(i.requires,s)}};n.forEach(i,function(n){s(n)});i=[];e.pop()};it=function(t){var i=[];return JSON.stringify(t,function(t,r){if(n.isObject(r)&&r!==null){if(i.indexOf(r)!==-1)return;i.push(r)}return r})};nt=function(n){var t=0,i,r,u;if(n.length==0)return t;for(i=0,u=n.length;i<u;i++)r=n.charCodeAt(i),t=(t<<5)-t+r|0;return t};this.$get=["$log","$rootElement","$rootScope","$cacheFactory","$q",function(t,r,s,l,a){function y(n){var i=a.defer();return t.error(n.message),i.reject(n),i.promise}var v,p=l("ocLazyLoad");return tt||(t={},t.error=n.noop,t.warn=n.noop,t.info=n.noop),ut.getInstanceInjector=function(){return v?v:v=r.data("$injector")||n.injector()},o=function(n,i){ft&&s.$broadcast(n,i);tt&&t.info(n,i)},{_broadcast:o,_$log:t,_getFilesCache:function(){return p},toggleWatch:function(n){n?e.push(!0):e.pop()},getModuleConfig:function(t){if(!n.isString(t))throw new Error("You need to give the name of the module to get");return k[t]?n.copy(k[t]):null},setModuleConfig:function(t){if(!n.isObject(t))throw new Error("You need to give the module config object to set");return k[t.name]=t,t},getModules:function(){return u},isLoaded:function(t){var f=function(n){var t=u.indexOf(n)>-1;return t||(t=!!st(n)),t},i,r;if(n.isString(t)&&(t=[t]),n.isArray(t)){for(i=0,r=t.length;i<r;i++)if(!f(t[i]))return!1;return!0}throw new Error("You need to define the module(s) name(s)");},_getModuleName:ot,_getModule:function(n){try{return f(n)}catch(t){(/No module/.test(t)||t.message.indexOf("$injector:nomod")>-1)&&(t.message='The module "'+it(n)+'" that you are trying to load does not exist. '+t.message);throw t;}},moduleExists:st,_loadDependencies:function(t,i){var e,o,u,f=[],r=this;if(t=r._getModuleName(t),t===null)return a.when();try{e=r._getModule(t)}catch(s){return y(s)}return o=r.getRequires(e),n.forEach(o,function(e){if(n.isString(e)){var o=r.getModuleConfig(e);if(o===null){d.push(e);return}e=o}if(r.moduleExists(e.name)){if(u=e.files.filter(function(n){return r.getModuleConfig(e.name).files.indexOf(n)<0}),u.length!==0&&r._$log.warn('Module "',t,'" attempted to redefine configuration for dependency. "',e.name,'"\n Additional Files Loaded:',u),n.isDefined(r.filesLoader))f.push(r.filesLoader(e,i).then(function(){return r._loadDependencies(e)}));else return y(new Error("Error: New dependencies need to be loaded from external files ("+e.files+"), but no loader has been defined."));return}if(n.isArray(e)?e={files:e}:n.isObject(e)&&e.hasOwnProperty("name")&&e.name&&(r.setModuleConfig(e),d.push(e.name)),n.isDefined(e.files)&&e.files.length!==0)if(n.isDefined(r.filesLoader))f.push(r.filesLoader(e,i).then(function(){return r._loadDependencies(e)}));else return y(new Error('Error: the module "'+e.name+'" is defined in external files ('+e.files+"), but no loader has been defined."))}),a.all(f)},inject:function(t,r){var u=this,f=a.defer(),e,s,o;if(n.isDefined(t)&&t!==null){if(n.isArray(t))return e=[],n.forEach(t,function(n){e.push(u.inject(n))}),a.all(e);u._addToLoadList(u._getModuleName(t),!0)}return i.length>0?(s=i.slice(),o=function o(n){d.push(n);u._loadDependencies(n,r).then(function(){try{c=[];rt(ut,d,r)}catch(n){u._$log.error(n.message);f.reject(n);return}i.length>0?o(i.shift()):f.resolve(s)},function(n){f.reject(n)})},o(i.shift())):f.resolve(),f.promise},getRequires:function(t){var i=[];return n.forEach(t.requires,function(n){u.indexOf(n)===-1&&i.push(n)}),i},_invokeQueue:g,_registerInvokeList:et,_register:rt,_addToLoadList:h}}];this._init(n.element(t.document))}]);a=n.bootstrap;n.bootstrap=function(t,i,r){return n.forEach(i.slice(),function(n){h(n,!0)}),a(t,i,r)};h=function(t,r){(e.length>0||r)&&n.isString(t)&&i.indexOf(t)===-1&&i.push(t)};f=n.module;n.module=function(n,t,i){return h(n),f(n,t,i)}})(angular,window),function(n){"use strict";n.module("oc.lazyLoad").directive("ocLazyLoad",["$ocLazyLoad","$compile","$animate","$parse",function(t,i,r,u){return{restrict:"A",terminal:!0,priority:1e3,compile:function(f){var e=f[0].innerHTML;return f.html(""),function(f,o,s){var h=u(s.ocLazyLoad);f.$watch(function(){return h(f)||s.ocLazyLoad},function(u){n.isDefined(u)&&t.load(u).then(function(){r.enter(i(e)(f),o)})},!0)}}}}])}(angular),function(n){"use strict";n.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q","$window","$interval",function(t,i,r,u){var o=!1,f=!1,e=r.document.getElementsByTagName("head")[0]||r.document.getElementsByTagName("body")[0];return t.buildElement=function(s,h,c){var v=i.defer(),l,b,k=t._getFilesCache(),d=function(n){var t=(new Date).getTime();return n.indexOf("?")>=0?n.substring(0,n.length-1)==="&"?n+"_dc="+t:n+"&_dc="+t:n+"?_dc="+t},w,y,a,p,g,nt,tt,it,rt;n.isUndefined(k.get(h))&&k.put(h,v.promise);switch(s){case"css":l=r.document.createElement("link");l.type="text/css";l.rel="stylesheet";l.href=c.cache===!1?d(h):h;break;case"js":l=r.document.createElement("script");l.src=c.cache===!1?d(h):h;break;default:v.reject(new Error('Requested type "'+s+'" is not known. Could not inject "'+h+'"'))}return l.onload=l.onreadystatechange=function(){l.readyState&&!/^c|loade/.test(l.readyState)||b||(l.onload=l.onreadystatechange=null,b=1,t._broadcast("ocLazyLoad.fileLoaded",h),v.resolve())},l.onerror=function(){v.reject(new Error("Unable to load "+h))},l.async=c.serie?0:1,w=e.lastChild,c.insertBefore&&(y=n.element(c.insertBefore),y&&y.length>0&&(w=y[0])),e.insertBefore(l,w),s=="css"&&(o||(a=r.navigator.userAgent.toLowerCase(),/iP(hone|od|ad)/.test(r.navigator.platform)?(p=r.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),g=parseFloat([parseInt(p[1],10),parseInt(p[2],10),parseInt(p[3]||0,10)].join(".")),f=g<6):a.indexOf("android")>-1?(nt=parseFloat(a.slice(a.indexOf("android")+8)),f=nt<4.4):a.indexOf("safari")>-1&&a.indexOf("chrome")==-1&&a.indexOf("phantomjs")==-1&&(tt=parseFloat(a.match(/version\/([\.\d]+)/i)[1]),f=tt<6)),f&&(it=1e3,rt=u(function(){try{l.sheet.cssRules;u.cancel(rt);l.onload()}catch(n){--it<=0&&l.onerror()}},20))),v.promise},t}])}])}(angular),function(n){"use strict";n.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q",function(t,i){return t.filesLoader=function(r){var u=arguments[1]===undefined?{}:arguments[1],e=[],o=[],s=[],f=[],h=null,y=t._getFilesCache(),v,c,l,a;return t.toggleWatch(!0),n.extend(u,r),v=function(i){var r=null,c;if(n.isObject(i)&&(r=i.type,i=i.path),h=y.get(i),n.isUndefined(h)||u.cache===!1){if((c=/^(css|less|html|htm|js)?(?=!)/.exec(i))!==null&&(r=c[1],i=i.substr(c[1].length+1,i.length)),!r)if((c=/[.](css|less|html|htm|js)?((\?|#).*)?$/.exec(i))!==null)r=c[1];else if(!t.jsLoader.hasOwnProperty("ocLazyLoadLoader")&&t.jsLoader.hasOwnProperty("load"))r="js";else{t._$log.error("File type could not be determined. "+i);return}(r==="css"||r==="less")&&e.indexOf(i)===-1?e.push(i):(r==="html"||r==="htm")&&o.indexOf(i)===-1?o.push(i):r==="js"||s.indexOf(i)===-1?s.push(i):t._$log.error("File type is not valid. "+i)}else h&&f.push(h)},u.serie?v(u.files.shift()):n.forEach(u.files,function(n){v(n)}),e.length>0&&(c=i.defer(),t.cssLoader(e,function(i){n.isDefined(i)&&t.cssLoader.hasOwnProperty("ocLazyLoadLoader")?(t._$log.error(i),c.reject(i)):c.resolve()},u),f.push(c.promise)),o.length>0&&(l=i.defer(),t.templatesLoader(o,function(i){n.isDefined(i)&&t.templatesLoader.hasOwnProperty("ocLazyLoadLoader")?(t._$log.error(i),l.reject(i)):l.resolve()},u),f.push(l.promise)),s.length>0&&(a=i.defer(),t.jsLoader(s,function(i){n.isDefined(i)&&t.jsLoader.hasOwnProperty("ocLazyLoadLoader")?(t._$log.error(i),a.reject(i)):a.resolve()},u),f.push(a.promise)),u.serie&&u.files.length>0?i.all(f).then(function(){return t.filesLoader(r,u)}):i.all(f)["finally"](function(n){return t.toggleWatch(!1),n})},t.load=function(r){var h=arguments[1]===undefined?{}:arguments[1],o=this,u=null,c=[],f=i.defer(),s,l,e;return n.isArray(r)?(n.forEach(r,function(n){c.push(o.load(n,h))}),i.all(c).then(function(n){f.resolve(n)},function(n){f.reject(n)}),f.promise):(n.isString(r)?(u=o.getModuleConfig(r),u||(u={files:[r]})):n.isObject(r)&&(u=n.isDefined(r.path)&&n.isDefined(r.type)?{files:[r]}:o.setModuleConfig(r)),u===null)?(l=o._getModuleName(r),s='Module "'+(l||"unknown")+'" is not configured, cannot load.',t._$log.error(s),f.reject(new Error(s)),f.promise):(n.isDefined(u.template)&&(n.isUndefined(u.files)&&(u.files=[]),n.isString(u.template)?u.files.push(u.template):n.isArray(u.template)&&u.files.concat(u.template)),e={},n.extend(e,h,u),n.isUndefined(u.files)&&n.isDefined(u.name)&&t.moduleExists(u.name))?t.inject(u.name,e):(t.filesLoader(u,e).then(function(){t.inject(null,e).then(function(n){f.resolve(n)},function(n){f.reject(n)})},function(n){f.reject(n)}),f.promise)},t}])}])}(angular),function(n){"use strict";n.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q",function(t,i){return t.cssLoader=function(r,u,f){var e=[];n.forEach(r,function(n){e.push(t.buildElement("css",n,f))});i.all(e).then(function(){u()},function(n){u(n)})},t.cssLoader.ocLazyLoadLoader=!0,t}])}])}(angular),function(n){"use strict";n.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q",function(t,i){return t.jsLoader=function(r,u,f){var e=[];n.forEach(r,function(n){e.push(t.buildElement("js",n,f))});i.all(e).then(function(){u()},function(n){u(n)})},t.jsLoader.ocLazyLoadLoader=!0,t}])}])}(angular),function(n){"use strict";n.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$templateCache","$q","$http",function(t,i,r,u){return t.templatesLoader=function(f,e,o){var s=[],h=t._getFilesCache();return n.forEach(f,function(t){var f=r.defer();s.push(f.promise);u.get(t,o).success(function(r){n.isString(r)&&r.length>0&&n.forEach(n.element(r),function(n){n.nodeName==="SCRIPT"&&n.type==="text/ng-template"&&i.put(n.id,n.innerHTML)});n.isUndefined(h.get(t))&&h.put(t,!0);f.resolve()}).error(function(n){f.reject(new Error('Unable to load template file "'+t+'": '+n))})}),r.all(s).then(function(){e()},function(n){e(n)})},t.templatesLoader.ocLazyLoadLoader=!0,t}])}])}(angular);Array.prototype.indexOf||(Array.prototype.indexOf=function(n,t){var r,f,u,i;if(this==null)throw new TypeError('"this" is null or not defined');if((f=Object(this),u=f.length>>>0,u===0)||(i=+t||0,Math.abs(i)===Infinity&&(i=0),i>=u))return-1;for(r=Math.max(i>=0?i:u-Math.abs(i),0);r<u;){if(r in f&&f[r]===n)return r;r++}return-1});
//# sourceMappingURL=ocLazyLoad.min.js.map
